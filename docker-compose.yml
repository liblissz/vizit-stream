services:
    mirotalksfu:
        image: mirotalk/sfu:latest
        container_name: mirotalksfu
        hostname: mirotalksfu
        restart: unless-stopped

        # NETWORKING:
        # 'host' mode is highly recommended for WebRTC performance on Linux VPS.
        # If using 'host' mode, you don't need the 'ports' section.
        network_mode: "host"

        # If your hosting doesn't support host mode (like Railway), uncomment below:
        # ports:
        #   - '3010:3010/tcp'
        #   - '40000-40100:40000-40100/tcp'
        #   - '40000-40100:40000-40100/udp'

        volumes:
            # Mounts your working local configs into the container
            - ./app/src/config.js:/src/app/src/config.js:ro
            - ./.env:/src/.env:ro

            # Optional: Uncomment to persist recordings
            # - ./app/rec:/src/app/rec

        logging:
            driver: "json-file"
            options:
                max-size: "10m"
                max-file: "3"
# services:
#     mirotalksfu:
#         image: mirotalk/sfu:latest
#         container_name: mirotalksfu
#         hostname: mirotalksfu
#         restart: unless-stopped
#         # The following ports are only required if 'network_mode: host' is NOT enabled.
#         # If you enable 'network_mode: host', you can comment out or remove the 'ports' section below.
#         # network_mode: 'host'
#         ports:
#             - '3010:3010/tcp'
#             - '40000-40100:40000-40100/tcp'
#             - '40000-40100:40000-40100/udp'
#         volumes:
#             - ./app/src/config.js:/src/app/src/config.js:ro
#             - ./.env:/src/.env:ro
#             # Mandatory volume if `RECORDING_ENABLED=true` in the .env
#             # - ./app/rec:/src/app/rec
#             # Mandatory volume if `RTMP_FROM_FILE=true` in the .env
#             # - ./app/rtmp:/src/app/rtmp
#             # Optional volumes for real-time updates:
#             # - ./app/:/src/app/:ro
#             # - ./public/:/src/public/:ro
